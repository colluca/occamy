[
    <% n_tiles = 3 %>
    <% num_clusters = cfg['nr_s1_quadrant'] * cfg['s1_quadrant']['nr_clusters'] %>
    <% base_hartid = cfg['cluster']['cluster_base_hartid'] %>

// Iterate clusters
% for k in range(0, num_clusters):

    // Compute cores
    % for j in range(0, 8):
    {
        "thread": "${f'hart_{base_hartid + 9*k + j}'}",
        "roi": [
        % for i in range(0, n_tiles):
            {"idx": ${2 * i + 1}, "label": "${f'tile_{i}'}"},
        % endfor
        ]
    },
    % endfor

    // DMA core
    {
        "thread": "${f'hart_{base_hartid + 9*k + 8}'}",
        "roi": [
            {"idx": 1, "label": "tile_0_in"},
        % for i in range(1, n_tiles):
            {"idx": ${4 * (i - 1) + 3}, "label": "${f'tile_{i}_in'}"},
            {"idx": ${4 * (i - 1) + 5}, "label": "${f'tile_{i-1}_out'}"},
        % endfor
            {"idx": ${4 * (i - 1) + 7}, "label": "${f'tile_{n_tiles-1}_out'}"},
        ]
    },

% endfor
]